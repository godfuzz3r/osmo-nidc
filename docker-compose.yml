services:
  osmo-antsdr-e200:
    build: ./docker/osmocom/
    image: osmo-nidc-antsdr
    container_name: osmo-nidc-antsdr
    privileged: true
    cap_add:
      - NET_ADMIN # Required for iptables rules
      - NET_RAW
      - SYS_NICE
    devices:
      - "/dev/bus"
    volumes:
      - ./configs/:/configs/
      - ./vol/hlr/:/hlr_vol/
      - ./vol/asterisk_outgoing/:/var/spool/asterisk/outgoing/
      - ./vol/asterisk_sounds/:/sounds/
    network_mode: "host"
    ulimits:
      nofile:
        soft: 65535
        hard: 65535
      nice:
        soft: 0
        hard: 0
      memlock:
        soft: -1
        hard: -1
    restart: "no"
  interaction:
    build: ./docker/interaction/
    image: osmo-nidc-interaction
    container_name: osmo-nidc-interaction
    network_mode: "host"
    environment:
      - NIDC_HOST=127.0.0.1
    volumes:
      - ./configs:/configs/
      - ./vol/asterisk_outgoing/:/asterisk_outgoing/
    restart: "no"
